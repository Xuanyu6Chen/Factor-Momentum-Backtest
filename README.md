# Factor Momentum Backtest (12–1 Momentum, Long-Only)

## Overview
This project builds a small, reproducible “quant research” pipeline that tests a classic trading signal — **momentum** — on historical US stock data. Each month-end, it ranks stocks by 12–1 momentum (past 12 months return excluding the most recent month), forms a long-only portfolio, and holds it until the next rebalance. The backtest includes turnover-based transaction costs and outputs daily returns and an equity curve.

The goal is to learn (and demonstrate) how to:
- turn an idea into a precise trading rule,
- simulate it fairly on historical data (a backtest),
- and evaluate results using standard return + risk metrics.

**Signal (12–1 momentum) meaning:** 
- Look back **12 months**
- Skip the most recent **1 month**
- Use the return from **t−12 months to t−1 month** as the momentum score

For each stock $i$ at rebalance date $t$,

$$
\text{Momentum}_{i,t} = \frac{P_{i,t-1}}{P_{i,t-12}} - 1
$$

where $P_{i,t-1}$ is the price one month before $t$ and $P_{i,t-12}$ is the price twelve months before $t$.

## Strategy Definition
### Universe
- A fixed list of **50 large-cap US tickers**.
- The universe is kept fixed to make the experiment clear and reproducible.

### Rebalancing schedule
- **Monthly** rebalancing using month-end dates.

### Signal
- For each ticker at each month-end: compute the **12–1 momentum** score.

### Portfolio construction (long-only)
At each rebalance:
1. Rank the 50 tickers by their momentum score (highest to lowest).
2. Select the **top 10** tickers (top 20%).
3. Allocate weights **equally** across the selected tickers.

So if 10 tickers are selected, each gets weight:
- 10% per ticker
- weights sum to 1.0 (100% invested)

### Holding period
- Hold these weights until the next month-end rebalance.

## Project Pipeline
**Produce the core market tables (Prices and Returns):**

1) Download prices for tickers — `Src/factor_momentum/data_fetch.py`  
2) Clean prices into a daily panel — `Src/factor_momentum/data_clean.py`  
3) Compute daily returns — `Src/factor_momentum/returns.py`  

**Compute the signal from prices (using only past data):**

4) Compute 12–1 momentum scores at each rebalance date — `Src/factor_momentum/signals/momentum_12_1.py`  

**Convert signal into a tradeable portfolio:**

5) Convert momentum scores to long-only, normalized portfolio weights (rebalance-date weights) — `Src/factor_momentum/portfolio.py`  

**Run the backtest (no look-ahead):**

6) Align rebalance-date weights to the daily trading calendar and apply starting the next trading day — `Src/factor_momentum/backtest.py`  
7) Compute daily **gross** portfolio returns from daily weights and asset returns — `Src/factor_momentum/backtest.py`  

**Apply trading frictions and report results:**

8) Compute turnover and subtract transaction costs to obtain **net** returns — `Src/factor_momentum/costs.py` + `Src/factor_momentum/backtest.py`  
9) Evaluate performance (equity curve, metrics) and save outputs — `Src/factor_momentum/evaluate.py`

## Repo Structure
- `Src/factor_momentum/` — core pipeline and strategy code
- `Data/Raw/` — raw pulled price data (ignored; regenerated by running the pipeline)
- `Data/Processed/` — cleaned returns/signal/weights (ignored; regenerated by running the pipeline)
- `Results/` — backtest outputs (ignored by default)
- `Results/assets/` — lightweight, committed sample artifacts (plots / summary tables)

## How to Run

### 1) Clone the repo and open the project
```bash
git clone <YOUR_REPO_URL>
cd Factor-Momentum-Backtest

### 2) Create and activate a virtual environment
```bash
python -m venv .venv
source .venv/bin/activate
python -m pip install --upgrade pip

### 3) Install dependencies
```bash
pip install -r requirements.txt

### 4) Configure the experiment
Edit:
```bash
Src/factor_momentum/config.py
```

Common things to change:
- TICKERS (stock universe)
- COST_BPS_GRID (e.g., [0, 10, 50])
- RESULTS_DIR 

### 5) Run the full pipeline (end-to-end)
```bash
PYTHONPATH=Src python -m factor_momentum.pipeline
